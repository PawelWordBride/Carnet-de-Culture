<ul>
  <li>
    <a href="pages/la_cellule.html" class="load-page"><strong>La cellule</strong></a>
  </li>
  <li><a href="#" class="toggle-section" data-target="systemes_vitaux"><strong>Systèmes vitaux</strong></a></li>
  <li><a href="#" class="toggle-section" data-target="systeme_circulatoire"><strong>Système circulatoire</strong></a></li>
  <li><a href="#" class="toggle-section" data-target="systeme_respiratoire"><strong>Système respiratoire</strong></a></li>
  <li><a href="#" class="toggle-section" data-target="systeme_digestif"><strong>Système digestif</strong></a></li>
</ul>

<div id="sub-content"></div>

<section id="systemes_vitaux" class="hidden">
  <p>Les systèmes vitaux assurent les fonctions essentielles à la vie : circulation, respiration, digestion, excrétion.</p>
</section>

<section id="systeme_circulatoire" class="hidden">
  <p>Le cœur, les artères, veines et capillaires transportent le sang et les nutriments dans tout le corps.</p>
</section>

<section id="systeme_respiratoire" class="hidden">
  <p>Les poumons et voies respiratoires permettent l’échange de gaz (O₂ et CO₂) avec l’environnement.</p>
</section>

<section id="systeme_digestif" class="hidden">
  <p>Les organes digestifs transforment les aliments en nutriments assimilables par le corps.</p>
</section>

<script>
document.addEventListener("DOMContentLoaded", function () {

  // Toggle sections internes (classe hidden)
  document.querySelectorAll('.toggle-section').forEach(link => {
    link.addEventListener('click', e => {
      e.preventDefault();
      const targetId = link.dataset.target;
      const section = document.getElementById(targetId);

      section.classList.toggle('hidden');

      if (!section.classList.contains('hidden')) {
        section.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    });
  });

  // Charger pages dynamiques dans sub-content
  const contentDiv = document.getElementById('sub-content');
  let currentPage = null;

  document.querySelectorAll('.load-page').forEach(link => {
    link.addEventListener('click', async e => {
      e.preventDefault();
      const url = link.getAttribute('href');

      if (currentPage === url) {
        contentDiv.innerHTML = "";
        contentDiv.style.display = "none";
        currentPage = null;
        return;
      }

      try {
        const response = await fetch(url);
        const html = await response.text();
        contentDiv.innerHTML = html;
        contentDiv.style.display = "block";
        currentPage = url;
      } catch (error) {
        contentDiv.innerHTML = "<p>Erreur lors du chargement de la page.</p>";
        contentDiv.style.display = "block";
        currentPage = null;
      }
    });
  });

});
</script>
